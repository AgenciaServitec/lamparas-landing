---
type Section = {
  id: string;
  title: string;
  description: string;
};

type Props = {
  sections: Section[];
  updatedAt?: string; // ej: "2026-01-21"
};

const { sections, updatedAt } = Astro.props;
---

<div class="grid gap-6 lg:grid-cols-12">
  <!-- TOC -->
  <aside class="lg:col-span-4">
    <div class="rounded-2xl border border-white/10 bg-surface/50 p-5 lg:sticky lg:top-6">
      <h3 class="text-foreground font-extrabold">Contenido</h3>
      {updatedAt && (
        <p class="mt-1 text-xs text-muted">Actualizado: {updatedAt}</p>
      )}

      <nav class="mt-4">
        <ul class="space-y-2">
          {sections.map((s) => (
            <li>
              <a
                href={`#${s.id}`}
                class="block rounded-xl px-3 py-2 text-sm text-muted hover:text-foreground hover:bg-background/40 transition"
              >
                {s.title}
              </a>
            </li>
          ))}
        </ul>
      </nav>

      <div class="mt-5 rounded-xl border border-white/10 bg-background/40 p-4">
        <p class="text-xs text-muted leading-6">
          Si tienes dudas, contáctanos por WhatsApp o desde la página de contacto.
        </p>
        <a
          href="/contacto"
          class="mt-3 inline-flex w-full items-center justify-center rounded-xl bg-primary text-black font-semibold px-4 py-2 hover:bg-primary-hover transition"
        >
          Ir a Contacto
        </a>
      </div>
    </div>
  </aside>

  <!-- SECTIONS -->
  <section class="lg:col-span-8">
    <div class="space-y-4">
      {sections.map((s) => (
        <article
          id={s.id}
          class="scroll-mt-24 rounded-2xl border border-white/10 bg-surface/50 p-6"
        >
          <h2 class="text-xl sm:text-2xl font-extrabold text-foreground">
            {s.title}
          </h2>

          <p class="mt-3 text-muted leading-7 whitespace-pre-line">
            {s.description}
          </p>
        </article>
      ))}
    </div>
  </section>
</div>
