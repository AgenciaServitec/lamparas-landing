---
import ProductCard from "./ProductCard.astro";

type Product = {
  id: string;
  slug: string;
  name: string;
  brand: string;
  code: string;
  imagePath: string;
  price: number;
  compareAtPrice?: number;
  stock: number;
  lampType?: "compatible" | "original";
  includesIgv?: boolean;
};

type Props = {
  title?: string;
  subtitle?: string;
  products: Product[];
};

const { title, subtitle, products } = Astro.props;

console.log("title: ", title);
console.log("subtitle: ", subtitle);
console.log("products: ", products);
---

<section class="w-full mt-16">
  {(title || subtitle) && (
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 mb-6">
      <div>
        {title && <h2 class="text-2xl sm:text-3xl font-extrabold text-foreground">{title}</h2>}
        {subtitle && <p class="text-muted mt-1">{subtitle}</p>}
      </div>

      <a
        href="/products"
        class="inline-flex text-sm text-muted hover:text-foreground transition sm:ml-auto"
      >
        Ver todo →
      </a>
    </div>
  )}

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
    {products.map((p) => (
      <ProductCard product={{
        id: p.id,
        slug: p.slug,
        code: p.name,
        brand: p.brand ?? "Genérico",
        name: p.name,
        price: p.price ?? 0,
        compareAtPrice: p.compareAtPrice,
        stock: p.stock ?? 0,
        imagePath: p.imagePath,
        lampType: p.lampType,
        includesIgv: p.includesIgv,
      }} />
    ))}
  </div>
</section>
